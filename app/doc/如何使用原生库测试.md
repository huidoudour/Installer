# ğŸ§ª å¦‚ä½•ä½¿ç”¨åŸç”Ÿåº“æµ‹è¯•åŠŸèƒ½

## ğŸ“± ä½¿ç”¨æ–¹æ³•

### æ–¹æ³• 1: é€šè¿‡è®¾ç½®ç•Œé¢(æ¨è)

1. **æ‰“å¼€åº”ç”¨**
2. **è¿›å…¥"è®¾ç½®"é¡µé¢** (åº•éƒ¨å¯¼èˆªæ æœ€å³è¾¹)
3. **é•¿æŒ‰"å…³äº"æŒ‰é’®** (æŒ‰ä½ä¸æ”¾ 1-2 ç§’)
4. **è‡ªåŠ¨è·³è½¬åˆ°åŸç”Ÿåº“æµ‹è¯•ç•Œé¢**

#### æ“ä½œæ¼”ç¤º:
```
è®¾ç½®é¡µé¢
    â†“
é•¿æŒ‰ [å…³äº] æŒ‰é’®
    â†“
è·³è½¬åˆ°æµ‹è¯•é¡µé¢
    â†“
æ˜¾ç¤ºæµ‹è¯•ç»“æœ
```

### æ–¹æ³• 2: é€šè¿‡ä»£ç è°ƒç”¨

åœ¨ä»»ä½• Activity ä¸­æ·»åŠ :

```java
import io.github.huidoudour.Installer.NativeTestActivity;

// åœ¨æŸä¸ªæŒ‰é’®ç‚¹å‡»äº‹ä»¶ä¸­
button.setOnClickListener(v -> {
    Intent intent = new Intent(this, NativeTestActivity.class);
    startActivity(intent);
});
```

## ğŸ“Š æµ‹è¯•ç•Œé¢æ˜¾ç¤ºå†…å®¹

æµ‹è¯•ç•Œé¢ä¼šè‡ªåŠ¨è¿è¡Œä»¥ä¸‹æµ‹è¯•:

### âœ… æµ‹è¯• 1: åº“ä¿¡æ¯
```
ğŸ“¦ Native Library Information

Library Name: installer-native
Version: 1.0.0
CPU Architecture: arm64-v8a (æˆ– x86_64)
Status: âœ… Loaded

Build Information:
Build Date: Dec  4 2025 15:30:00
Compiler: Clang 17.0
C++ Standard: 201703
```

### âœ… æµ‹è¯• 2: æ€§èƒ½å¯¹æ¯”
```
ğŸš€ Performance Comparison

Iterations: 10,000,000

Java Time: 25,432 Î¼s
C++ Time: 8,156 Î¼s

Speedup: 3.12x
âœ… Native is faster!
```

### âœ… æµ‹è¯• 3: å“ˆå¸Œæ€§èƒ½
```
ğŸ” Hash Performance Test

Iterations: 100,000
Test Data: "Hello, Android Native Library!..."

Java Time: 15,234 Î¼s
Native Time: 12,456 Î¼s

Speedup: 1.22x
```

### âœ… æµ‹è¯• 4: å“ˆå¸Œè®¡ç®—ç¤ºä¾‹
```
Input: "Hello, Android Native!"
Hash: a8f5e2c3d1b4
```

## âŒ å¦‚æœåŠ è½½å¤±è´¥

å¦‚æœåŸç”Ÿåº“åŠ è½½å¤±è´¥,ä¼šæ˜¾ç¤º:

```
âŒ åŸç”Ÿåº“åŠ è½½å¤±è´¥!

é”™è¯¯ä¿¡æ¯:
dlopen failed: library "libinstaller-native.so" not found

è¯·æ£€æŸ¥:
1. NDK æ˜¯å¦æ­£ç¡®å®‰è£…
2. CMake é…ç½®æ˜¯å¦æ­£ç¡®
3. æ¶æ„æ˜¯å¦åŒ¹é… (arm64-v8a æˆ– x86_64)
```

### è§£å†³æ­¥éª¤:

1. **ç¡®è®¤ NDK å·²å®‰è£…**
   - Android Studio â†’ Tools â†’ SDK Manager
   - SDK Tools â†’ å‹¾é€‰ "NDK (Side by side)"

2. **æ¸…ç†å¹¶é‡æ–°æ„å»º**
   ```bash
   .\gradlew clean
   .\gradlew assembleDebug
   ```

3. **æ£€æŸ¥è®¾å¤‡æ¶æ„**
   ```bash
   adb shell getprop ro.product.cpu.abi
   ```
   åº”è¯¥è¿”å› `arm64-v8a` æˆ– `x86_64`

## ğŸ” éªŒè¯åº“æ˜¯å¦æ­£ç¡®æ‰“åŒ…

### æ–¹æ³• 1: åœ¨ä»£ç ä¸­éªŒè¯

```java
import io.github.huidoudour.Installer.utils.NativeHelper;

// ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥æ£€æŸ¥
if (NativeHelper.isNativeLibraryAvailable()) {
    Log.i("Native", "âœ… åŸç”Ÿåº“å·²åŠ è½½");
} else {
    Log.e("Native", "âŒ åŠ è½½å¤±è´¥: " + NativeHelper.getLoadError());
}
```

### æ–¹æ³• 2: æ£€æŸ¥ APK å†…å®¹

**Windows PowerShell:**
```powershell
# è§£å‹ APK
Expand-Archive app\build\outputs\apk\debug\app-debug.apk extracted

# æŸ¥çœ‹ .so æ–‡ä»¶
ls extracted\lib\*\*.so

# åº”è¯¥çœ‹åˆ°:
# lib/arm64-v8a/libinstaller-native.so
# lib/arm64-v8a/libc++_shared.so
# lib/x86_64/libinstaller-native.so
# lib/x86_64/libc++_shared.so
```

## ğŸš€ åœ¨ä¸åŒè®¾å¤‡ä¸Šæµ‹è¯•

### çœŸæœº (arm64-v8a)
- å¤§éƒ¨åˆ†ç°ä»£ Android æ‰‹æœº
- æ€§èƒ½æµ‹è¯•ç»“æœæœ€å‡†ç¡®
- æ¨èç”¨äºæ€§èƒ½å¯¹æ¯”

### æ¨¡æ‹Ÿå™¨ (x86_64)
- Android Studio AVD
- æ–¹ä¾¿è°ƒè¯•
- æ€§èƒ½å¯èƒ½ä¸çœŸæœºæœ‰å·®å¼‚

### æµ‹è¯•æ£€æŸ¥æ¸…å•

- [ ] åŸç”Ÿåº“æˆåŠŸåŠ è½½
- [ ] èƒ½è·å–æ­£ç¡®çš„ CPU æ¶æ„ä¿¡æ¯
- [ ] æ€§èƒ½æµ‹è¯•æ˜¾ç¤º C++ æœ‰åŠ é€Ÿæ•ˆæœ
- [ ] å“ˆå¸Œè®¡ç®—æ­£å¸¸å·¥ä½œ
- [ ] æ²¡æœ‰å´©æºƒæˆ–å¼‚å¸¸

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### 1. å¿«é€Ÿæµ‹è¯•
é•¿æŒ‰"å…³äº"æŒ‰é’®æ˜¯æœ€å¿«çš„æ–¹å¼,æ— éœ€ä¿®æ”¹ä»£ç 

### 2. å¼€å‘è°ƒè¯•
å¯ä»¥åœ¨ Logcat ä¸­æŸ¥çœ‹è¯¦ç»†æ—¥å¿—:
```
Tag: NativeHelper
Tag: InstallerNative
```

### 3. æ€§èƒ½åŸºå‡†
å¤šæ¬¡è¿è¡Œæµ‹è¯•,å–å¹³å‡å€¼æ›´å‡†ç¡®

### 4. æ¶æ„éªŒè¯
åœ¨ä¸åŒè®¾å¤‡ä¸Šæµ‹è¯•,ç¡®ä¿æ‰€æœ‰æ¶æ„éƒ½æ­£å¸¸

## ğŸ› å¸¸è§é—®é¢˜

### Q1: é•¿æŒ‰"å…³äº"æŒ‰é’®æ²¡ååº”?
**A**: ç¡®ä¿å·²ç»åŒæ­¥é¡¹ç›®å¹¶é‡æ–°æ„å»º:
```bash
.\gradlew clean assembleDebug
```

### Q2: æµ‹è¯•ç•Œé¢æ˜¾ç¤ºåŠ è½½å¤±è´¥?
**A**: æŒ‰ç…§é”™è¯¯ä¿¡æ¯æ£€æŸ¥:
1. NDK æ˜¯å¦å®‰è£…
2. CMake ç‰ˆæœ¬æ˜¯å¦åŒ¹é…
3. è®¾å¤‡æ¶æ„æ˜¯å¦æ”¯æŒ

### Q3: æ€§èƒ½æµ‹è¯•ç»“æœå¼‚å¸¸?
**A**: 
- ç¡®ä¿è®¾å¤‡ä¸åœ¨çœç”µæ¨¡å¼
- å…³é—­åå°åº”ç”¨é‡Šæ”¾èµ„æº
- å¤šæ¬¡æµ‹è¯•å–å¹³å‡å€¼

### Q4: æ‰¾ä¸åˆ° NativeTestActivity?
**A**: 
- ç¡®è®¤å·²æ·»åŠ åˆ° AndroidManifest.xml
- é‡æ–°åŒæ­¥é¡¹ç›®
- Clean & Rebuild

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [åŸç”Ÿåº“é›†æˆå®Œæˆè¯´æ˜.md](åŸç”Ÿåº“é›†æˆå®Œæˆè¯´æ˜.md) - å®Œæ•´é…ç½®è¯´æ˜
- [NATIVE_QUICKSTART.md](NATIVE_QUICKSTART.md) - å¿«é€Ÿå¼€å§‹æŒ‡å—
- [app/doc/CPP_NATIVE_LIBRARY.md](app/doc/CPP_NATIVE_LIBRARY.md) - è¯¦ç»†æŠ€æœ¯æ–‡æ¡£

---

**æç¤º**: è¿™æ˜¯å¼€å‘è€…å·¥å…·,ä¸ä¼šåœ¨å‘å¸ƒç‰ˆæœ¬ä¸­æ˜¾ç¤ºã€‚å¦‚æœéœ€è¦,å¯ä»¥åœ¨ ProGuard è§„åˆ™ä¸­ç§»é™¤æµ‹è¯•ç›¸å…³ä»£ç ã€‚
